doctype html
html
head
  meta(charset='utf-8')
  title  Online Shopping System - Main Project
  link(href='stylesheets/bootstrap.min.css', rel='stylesheet')
  link(rel='stylesheet', href='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css')

  link(rel='stylesheet', href='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css')
  script(type='text/javascript', src='http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js')

  script(src='http://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js')

  link(rel='stylesheet', type='text/css', href='style.css')
  script(language='Javascript', src='index.js')

block body
    
    .container-fluid
      header
        nav.navbar.navbar-default.navbar-fixed-top
          .container
            // Brand and toggle get grouped for better mobile display
            .navbar-header
              button.navbar-toggle.collapsed(type='button', data-toggle='collapse', data-target='#bs-example-navbar-collapse-1', aria-expanded='false')
                span.sr-only Toggle navigation
                span.icon-bar
                span.icon-bar
                span.icon-bar
              a.navbar-brand(href="/") Online Shopping System
            // Collect the nav links, forms, and other content for toggling
            #bs-example-navbar-collapse-1.collapse.navbar-collapse
             ul.nav.navbar-nav
              li
                a(href='/categories') Categories
              li
               form.navbar-form.navbar-right(action = "/shoppingCart")
                button.btn.btn-default Shopping Cart  
              li
               form.navbar-form.navbar-right(role='search', action = "/search", method = "get")
                .form-group
                 input.form-control(type='text', placeholder='Search', name = "searchString")
                button.btn.btn-default(type='submit') Search
              if user_id == undefined  
                <li data-toggle="modal" data-target="#loginBox"><a href="#login"><span style="margin-right:5px; font-size:120%;" class="ion ion-person"></span>Login</a></li>
                <li data-toggle="modal" data-target="#signUpBox" style="cursor:pointer;"><a><span style="margin-right:5px; font-size:120%;" class="ion ion-person-add"></span>Sign Up</a></li>
              else 
                li
                  a(href='/createListing') Create Listing
                li
                  a(href='/account') Profile
                li
                  a(href='/removeCookie') Logout
    // Forgot Password Box 
    #forgotPasswordBox.modal
      .modal-dialog
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true')
                span.glyphicon.glyphicon-remove
            span.fa.fa-key(style='float: left; font-size: 150%; margin: 5px 10px 0px 0px;')
            h4(style='float:left') Forgot password
          .modal-body
            .form-group
              label.control-label(for='email') Email:
              input.form-control(type='text', placeholder='Email...', name='email')
            .form-group
              button.btn.btn-primary Submit

    // Login Box         
    #loginBox.modal
      .modal-dialog
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true')
                span.glyphicon.glyphicon-remove
            span.ion.ion-person(style='float: left; font-size: 150%; margin: 5px 10px 0px 0px;')
            h4(style='float:left') Login
          .modal-body(style='height:400px !important;')
            #loginbox.mainbox.col-md-12
              .panel.panel-primary
                .panel-heading
                  .panel-title Sign In
                  div(data-dismiss='modal', data-toggle='modal', data-target='#forgotPasswordBox', style='float:right; font-size: 80%; position: relative; top:-10px')
                    a(href='#', style='color:white;') Forgot password?
                .panel-body(style='padding-top:30px')
                  #login-alert.alert.alert-danger.col-sm-12(style='display:none')
                  form#loginform.form-horizontal(method='post' action="login")
                    .form-group
                      label.col-md-4.control-label(for='username') Username
                      .col-md-7.col-md-offset-1
                        input#pass.form-control(type='username', name='username', placeholder='Username')                   
                    .form-group
                      label.col-md-4.control-label(for='password') Password
                      .col-md-7.col-md-offset-1
                        input#pass.form-control(type='password', name='password', placeholder='Password...')
                 
                    .form-group
                      .col-md-7.col-md-offset-4
                        //a#btn-login.btn.btn-success(type='submit') Register 
                        button#register1.btn.btn-success(style='color:#555555;font-weight:bold;margin-left:35px;', type='submit') Login
                        button#close.btn.btn-primary(style='font-weight:bold', type='button', data-dismiss='modal') Close


    // Sign Up Box
    #signUpBox.modal
      .modal-dialog
        .modal-content
          .modal-header
            button.close(type='button', data-dismiss='modal', aria-label='Close')
              span(aria-hidden='true')
                span.glyphicon.glyphicon-remove
            span.ion.ion-person-add(style='float: left; font-size: 150%; margin: 5px 10px 0px 0px;')
            h4(style='float:left') Sign Up
          .modal-body
            form#registrationForm.form-horizontal(method='post' action='/')
              .form-group
                label.control-label.col-md-4(for='fullname') Full Name
                .col-md-7.col-md-offset-1
                  input#name1.form-control(type='text', name='fname', placeholder='Full Name...')
              .form-group
                label.control-label.col-md-4(for='username') User Name
                .col-md-7.col-md-offset-1
                  input#last.form-control(type='text', name='username', placeholder='Username...')
              .form-group
                label.col-md-4.control-label(for='email') Email
                .col-md-7.col-md-offset-1
                  input#email.form-control(type='email', name='email', placeholder='Email...')
              .form-group
                label.col-md-4.control-label(for='pass') Password
                .col-md-7.col-md-offset-1
                  input#pass.form-control(type='password', name='pass', placeholder='Password...')
              .form-group
                label.col-md-4.control-label(for='imageURL') ImageURL
                .col-md-7.col-md-offset-1
                  input#pass.form-control(type='imageURL', name='imageURL', placeholder='Image URL')                  
              .form-group
                .col-md-7.col-md-offset-4
                  //a#btn-login.btn.btn-success(type='submit') Register 
                  button#register1.btn.btn-warning(style='color:#555555;font-weight:bold;margin-left:35px;', type='submit') Register
                  button#close.btn.btn-primary(style='font-weight:bold', type='button', data-dismiss='modal') Close
    hr           
    .row.featurette
      .col-md-7.col-md-push-5
        h2.featurette-heading #{realname}
        p.lead #{address}
        p.lead #{rating}/5
        h5 "#{feedback}"
      .col-md-3.col-md-pull-5
        img.featurette-image.img-responsive.center-block(src='#{photoSRC}')
    
    .container-fluid
      .row
      .col-lg-12
          h2.page-header Recently Bought
          .dave
              .slider-data
                  .multiple-items(style='margin: auto; width: 100%;')
                      -var a=0
                      each val in boughtItems
                          -a++
                          -var imageURL = boughtItems[a-1].photourl;
                          -var imageSID = boughtItems[a-1].sid;
                          a(href='/viewProduct' + "?sid=" + imageSID)
                              img(src= "" + imageURL, width='200', height='200')
      
      .row
        .col-lg-12
          h2.page-header Items For Sale
          .dave
              .slider-data
                  .multiple-items(style='margin: auto; width: 100%;')
                      -var a=0
                      if(slider_data=='')
                        p No items for sale
                      each val in slider_data
                          -a++
                          -var imageURL = slider_data[a-1].photourl;
                          -var imageSID = slider_data[a-1].sid;
                          a(href='/viewProduct' + "?sid=" + imageSID)
                              img(src= "" + imageURL)
      hr
      // Site footer
      footer.footer
        p Â© SWEN303 2016
      script(src='https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js')
      script(src='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.4/js/bootstrap.min.js')
